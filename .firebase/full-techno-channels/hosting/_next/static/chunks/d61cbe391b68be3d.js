(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9165,e=>{"use strict";let t=e.i(47167).default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000";async function n(e,o={}){let r=localStorage.getItem("token"),i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...o.headers},l=await fetch(`${t}${e}`,{...o,headers:i});if(401!==l.status||window.location.pathname.includes("/login")||(localStorage.removeItem("token"),window.location.href="/login"),!l.ok)throw Error((await l.json().catch(()=>({}))).detail||"Error en la petición a la API");return l.json()}e.s(["adminApi",0,{getConfig:()=>n("/admin/config"),updateConfig:(e,t)=>n("/admin/config",{method:"POST",body:JSON.stringify({key:e,value:t})}),getWithdrawals:()=>n("/admin/withdrawals"),processWithdrawal:(e,t)=>n(`/admin/withdrawals/${e}/process`,{method:"POST",body:JSON.stringify({status:t})}),getTickets:()=>n("/admin/tickets"),getTicketDetails:e=>n(`/admin/tickets/${e}`),replyTicket:(e,t)=>n(`/admin/tickets/${e}/reply`,{method:"POST",body:JSON.stringify({content:t})}),getPendingPayments:()=>n("/admin/payments/pending"),verifyCryptoPayment:e=>n(`/admin/payments/${e}/verify-crypto`,{method:"POST"}),getUsers:()=>n("/admin/users"),deleteUser:e=>n(`/admin/users/${e}`,{method:"DELETE"}),getUserLegalInfo:e=>n(`/admin/users/${e}/legal`),getTaxSummary:e=>n(`/admin/tax/summary${e?`?year=${e}`:""}`),getExpenses:e=>n(`/admin/expenses${e?`?year=${e}`:""}`),createExpense:e=>n("/admin/expenses",{method:"POST",body:JSON.stringify(e)}),deleteExpense:e=>n(`/admin/expenses/${e}`,{method:"DELETE"})},"apiRequest",()=>n,"authApi",0,{login:e=>{let n=new URLSearchParams;return n.append("username",e.email),n.append("password",e.password),fetch(`${t}/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}).then(async e=>{if(!e.ok)throw Error("Credenciales inválidas");return e.json()})},register:e=>n("/register",{method:"POST",body:JSON.stringify({email:e.email,password:e.password,full_name:e.fullName,referral_code:e.referral_code,registration_token:e.registration_token})}),googleAuth:(e,t,o)=>n("/auth/google",{method:"POST",body:JSON.stringify({credential:e,referral_code:t,registration_token:o})}),magicLogin:e=>n(`/auth/magic-login?token=${e}`,{method:"POST"})},"ownerApi",0,{getSummary:()=>n("/owner/dashboard/summary"),getChannels:()=>n("/owner/channels"),createChannel:e=>n("/owner/channels",{method:"POST",body:JSON.stringify({title:e})}),deleteChannel:(e,t=!1)=>n(`/owner/channels/${e}${t?"?confirm=true":""}`,{method:"DELETE"}),getDeleteChannelCost:e=>n(`/owner/channels/${e}/delete-cost`),getWithdrawals:()=>n("/owner/withdrawals"),requestWithdrawal:e=>n("/owner/withdrawals",{method:"POST",body:JSON.stringify(e)}),getTickets:()=>n("/owner/tickets"),createTicket:e=>n("/owner/tickets",{method:"POST",body:JSON.stringify(e)}),getTicketDetails:e=>n(`/owner/tickets/${e}`),replyTicket:(e,t)=>n(`/owner/tickets/${e}/reply`,{method:"POST",body:JSON.stringify({content:t})}),updateBranding:(e,t)=>n(`/owner/channels/${e}/branding`,{method:"POST",body:JSON.stringify(t)}),updateProfile:e=>n("/owner/profile",{method:"PUT",body:JSON.stringify(e)}),updatePassword:e=>n("/owner/password",{method:"PUT",body:JSON.stringify(e)}),getPromotions:e=>n(`/owner/channels/${e}/promotions`),createPromotion:(e,t)=>n(`/owner/channels/${e}/promotions`,{method:"POST",body:JSON.stringify(t)}),deletePromotion:e=>n(`/owner/promotions/${e}`,{method:"DELETE"}),getAnalytics:()=>n("/owner/analytics"),getPlans:e=>n(`/owner/channels/${e}/plans`),createPlan:(e,t)=>n(`/owner/channels/${e}/plans`,{method:"POST",body:JSON.stringify(t)}),updatePlan:(e,t)=>n(`/owner/plans/${e}`,{method:"PATCH",body:JSON.stringify(t)}),deletePlan:e=>n(`/owner/plans/${e}`,{method:"DELETE"})},"publicApi",0,{getConfig:()=>n("/public/config")}])},93936,e=>{"use strict";var t=e.i(71645);let n=(0,t.createContext)(null);function o({clientId:e,nonce:o,onScriptLoadSuccess:r,onScriptLoadError:i,children:l}){let a=function(e={}){let{nonce:n,onScriptLoadSuccess:o,onScriptLoadError:r}=e,[i,l]=(0,t.useState)(!1),a=(0,t.useRef)(o);a.current=o;let s=(0,t.useRef)(r);return s.current=r,(0,t.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=n,e.onload=()=>{var e;l(!0),null==(e=a.current)||e.call(a)},e.onerror=()=>{var e;l(!1),null==(e=s.current)||e.call(s)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[n]),i}({nonce:o,onScriptLoadSuccess:r,onScriptLoadError:i}),s=(0,t.useMemo)(()=>({clientId:e,scriptLoadedSuccessfully:a}),[e,a]);return t.default.createElement(n.Provider,{value:s},l)}let r={large:40,medium:32,small:20};function i({onSuccess:e,onError:o,useOneTap:i,promptMomentNotification:l,type:a="standard",theme:s="outline",size:d="large",text:u,shape:c,logo_alignment:m,width:g,locale:h,click_listener:w,containerProps:f,...y}){let p=(0,t.useRef)(null),{clientId:S,scriptLoadedSuccessfully:P}=function(){let e=(0,t.useContext)(n);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),v=(0,t.useRef)(e);v.current=e;let T=(0,t.useRef)(o);T.current=o;let O=(0,t.useRef)(l);return O.current=l,(0,t.useEffect)(()=>{var e,t,n,o,r,l,f,E,$;if(P)return null==(n=null==(t=null==(e=null==window?void 0:window.google)?void 0:e.accounts)?void 0:t.id)||n.initialize({client_id:S,callback:e=>{var t,n;if(!(null==e?void 0:e.credential))return null==(t=T.current)?void 0:t.call(T);let{credential:o,select_by:r}=e;v.current({credential:o,clientId:null!=(n=null==e?void 0:e.clientId)?n:null==e?void 0:e.client_id,select_by:r})},...y}),null==(l=null==(r=null==(o=null==window?void 0:window.google)?void 0:o.accounts)?void 0:r.id)||l.renderButton(p.current,{type:a,theme:s,size:d,text:u,shape:c,logo_alignment:m,width:g,locale:h,click_listener:w}),i&&(null==($=null==(E=null==(f=null==window?void 0:window.google)?void 0:f.accounts)?void 0:E.id)||$.prompt(O.current)),()=>{var e,t,n;i&&(null==(n=null==(t=null==(e=null==window?void 0:window.google)?void 0:e.accounts)?void 0:t.id)||n.cancel())}},[S,P,i,a,s,d,u,c,m,g,h]),t.default.createElement("div",{...f,ref:p,style:{height:r[d],...null==f?void 0:f.style}})}e.s(["GoogleLogin",()=>i,"GoogleOAuthProvider",()=>o])},15789,e=>{"use strict";var t=e.i(43476),n=e.i(71645),o=e.i(9165);let r=(0,n.createContext)({user:null,loading:!0,refreshUser:async()=>{},token:null});function i({children:e}){let[i,l]=(0,n.useState)(null),[a,s]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null),c=async()=>{try{let e=null;if(e=localStorage.getItem("token"),u(e),!e)return void s(!1);let t=await o.ownerApi.getSummary();l(t)}catch(e){console.error("Failed to load user",e)}finally{s(!1)}};return(0,n.useEffect)(()=>{c()},[]),(0,t.jsx)(r.Provider,{value:{user:i,loading:a,refreshUser:c,token:d},children:e})}e.s(["AuthProvider",()=>i,"useAuth",0,()=>(0,n.useContext)(r)])},60509,e=>{"use strict";var t=e.i(43476),n=e.i(71645),o=e.i(93936),r=e.i(15789);let i=()=>()=>{},l=()=>!0,a=()=>!1;function s({children:e,googleClientId:s}){return(0,n.useSyncExternalStore)(i,l,a)?s?(0,t.jsx)(o.GoogleOAuthProvider,{clientId:s,children:(0,t.jsx)(r.AuthProvider,{children:e})}):(0,t.jsx)(t.Fragment,{children:e}):null}e.s(["ClientProviders",()=>s])}]);